# Default values for 389ds.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

image:
  repository: gabibbo97/389ds
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: "fedora389ds"

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name:

podSecurityContext: {}
  # fsGroup: 2000
  
securityContext:
  allowPrivilegeEscalation: false  # Prevent privilege escalation
  capabilities:
    drop:
      - ALL  # Drop all default capabilities
    # Remove the NET_BIND_SERVICE if not absolutely necessary
    # If still required, you can leave it in, but ideally, it should be removed
  readOnlyRootFilesystem: true  # Enforce read-only root filesystem
  runAsNonRoot: true  # Ensure the container does not run as root
  runAsUser: 10001  # Set a non-root user with UID > 10000
  runAsGroup: 10001  # Set a non-root group with GID > 10000
  seccompProfile:
    type: RuntimeDefault  # Apply seccomp profile for added security

service:
  type: ClusterIP
  ldap:
    enabled: true
    port: 389
  ldaps:
    enabled: true
    port: 636

resources:
  limits:
    cpu: "500m"  # Set CPU limit to prevent DoS via resource exhaustion
    memory: "256Mi"  # Set memory limit to prevent memory exhaustion
  requests:
    cpu: "250m"  # Specify CPU request for better scheduling
    memory: "128Mi"  # Specify memory request for better scheduling

nodeSelector: {}

tolerations: []

affinity: {}

directoryManagerPassword: ''

clientCASecrets: []
serverCertSecret: ''
serverCertPasswordSecretName: ''
serverCertPasswordSecretKey: ''

persistence:
  enabled: false
  storageClassName: ''
  size: 1Gi
